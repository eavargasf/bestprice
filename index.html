import React, { useState, useEffect } from 'react';
import { Home, Smartphone, ShoppingBag, Truck, Plane, Frown, Building } from 'lucide-react';

const products = {
  Home: [
    { name: "Smart Speaker", details: "Voice-controlled home assistant", image: "300/200" },
    { name: "Coffee Maker", details: "Programmable, 12-cup capacity", image: "300/200" },
    { name: "Air Purifier", details: "HEPA filter, 3-speed fan", image: "300/200" },
  ],
  Technology: [
    { name: "Smartphone", details: "Latest model, 5G capable", image: "300/200" },
    { name: "Laptop", details: "Ultra-thin, 16GB RAM", image: "300/200" },
    { name: "Wireless Earbuds", details: "Noise-cancelling, 24h battery", image: "300/200" },
  ],
  Fashion: [
    { name: "Denim Jacket", details: "Classic style, all sizes", image: "300/200" },
    { name: "Running Shoes", details: "Lightweight, cushioned sole", image: "300/200" },
    { name: "Sunglasses", details: "UV protection, polarized", image: "300/200" },
  ],
  Toys: [
    { name: "Building Blocks", details: "500 pieces, ages 5+", image: "300/200" },
    { name: "Remote Control Car", details: "Off-road capable, rechargeable", image: "300/200" },
    { name: "Board Game", details: "Family-friendly, 2-6 players", image: "300/200" },
  ],
  Travel: [
    { name: "Luggage Set", details: "3 pieces, hardshell", image: "300/200" },
    { name: "Travel Pillow", details: "Memory foam, machine washable", image: "300/200" },
    { name: "Portable Charger", details: "20000mAh, fast charging", image: "300/200" },
  ],
  Rudeness: [
    { name: "Joke Book", details: "1001 pranks and gags", image: "300/200" },
    { name: "Whoopee Cushion", details: "Classic prank item", image: "300/200" },
    { name: "Funny T-Shirt", details: "Sarcastic slogans, all sizes", image: "300/200" },
  ],
  'Tiny Home': [
    { name: "Folding Table", details: "Space-saving, seats 4", image: "300/200" },
    { name: "Storage Ottoman", details: "Multifunctional furniture", image: "300/200" },
    { name: "Wall-mounted Desk", details: "Foldable, compact workspace", image: "300/200" },
  ],
};

const Header = ({ setActiveTab, searchTerm, setSearchTerm }) => {
  const navItems = [
    { name: 'Home', icon: Home },
    { name: 'Technology', icon: Smartphone },
    { name: 'Fashion', icon: ShoppingBag },
    { name: 'Toys', icon: Truck },
    { name: 'Travel', icon: Plane },
    { name: 'Rudeness', icon: Frown },
    { name: 'Tiny Home', icon: Building },
  ];

  return (
    <header className="bg-blue-900 text-white">
      <div className="container mx-auto px-4 py-3">
        <div className="flex items-center justify-between">
          <h1 className="text-2xl font-bold">Best Price</h1>
          <input
            type="text"
            placeholder="Search Best Price"
            className="w-1/3 px-4 py-2 rounded-full bg-blue-800 text-white placeholder-blue-300"
            value={searchTerm}
            onChange={(e) => setSearchTerm(e.target.value)}
          />
        </div>
      </div>
      <nav className="bg-blue-800">
        <div className="container mx-auto px-4">
          <ul className="flex justify-between py-2">
            {navItems.map((item) => (
              <li key={item.name} className="flex items-center">
                <button 
                  onClick={() => setActiveTab(item.name)} 
                  className="flex items-center text-sm hover:text-blue-300"
                >
                  <item.icon className="w-4 h-4 mr-1" />
                  {item.name}
                </button>
              </li>
            ))}
          </ul>
        </div>
      </nav>
    </header>
  );
};

const Banner = () => (
  <div className="bg-yellow-400 text-blue-900 py-4">
    <div className="container mx-auto px-4 flex justify-between items-center">
      <h2 className="text-xl font-bold">Offer of the Week: 50% off all Electronics!</h2>
      <button className="bg-blue-900 text-white px-4 py-2 rounded hover:bg-blue-800">
        See Offer
      </button>
    </div>
  </div>
);

const ProductCard = ({ name, details, image }) => (
  <div className="bg-white rounded-lg shadow-md p-4">
    <img src={`/api/placeholder/${image}`} alt={name} className="w-full h-48 object-cover mb-4" />
    <h3 className="text-lg font-semibold mb-2">{name}</h3>
    <p className="text-gray-600 mb-4">{details}</p>
    <a
      href="#"
      target="_blank"
      rel="noopener noreferrer"
      className="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
    >
      View Details
    </a>
  </div>
);

const ProductGrid = ({ category, searchTerm }) => {
  const [filteredProducts, setFilteredProducts] = useState([]);

  useEffect(() => {
    const allProducts = Object.values(products).flat();
    const filtered = searchTerm
      ? allProducts.filter(product => 
          product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
          product.details.toLowerCase().includes(searchTerm.toLowerCase())
        )
      : products[category];
    setFilteredProducts(filtered);
  }, [category, searchTerm]);

  return (
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {filteredProducts.map((product, index) => (
        <ProductCard key={index} {...product} />
      ))}
    </div>
  );
};

const Footer = () => (
  <footer className="bg-blue-900 text-white py-8">
    <div className="container mx-auto px-4">
      <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div>
          <h3 className="text-lg font-semibold mb-4">About Best Price</h3>
          <p>Your one-stop shop for the best deals on everything you need.</p>
        </div>
        <div>
          <h3 className="text-lg font-semibold mb-4">Customer Service</h3>
          <ul>
            <li><a href="#" className="hover:text-blue-300">Contact Us</a></li>
            <li><a href="#" className="hover:text-blue-300">Returns & Refunds</a></li>
            <li><a href="#" className="hover:text-blue-300">FAQ</a></li>
          </ul>
        </div>
        <div>
          <h3 className="text-lg font-semibold mb-4">Follow Us</h3>
          <ul>
            <li><a href="#" className="hover:text-blue-300">Facebook</a></li>
            <li><a href="#" className="hover:text-blue-300">Twitter</a></li>
            <li><a href="#" className="hover:text-blue-300">Instagram</a></li>
          </ul>
        </div>
      </div>
      <div className="mt-8 text-center">
        <p>&copy; 2024 Best Price. All rights reserved.</p>
      </div>
    </div>
  </footer>
);

const App = () => {
  const [activeTab, setActiveTab] = useState('Home');
  const [searchTerm, setSearchTerm] = useState('');

  return (
    <div className="min-h-screen flex flex-col bg-gray-100">
      <Header setActiveTab={setActiveTab} searchTerm={searchTerm} setSearchTerm={setSearchTerm} />
      <Banner />
      <main className="flex-grow container mx-auto px-4 py-8">
        <h2 className="text-2xl font-bold mb-6">{searchTerm ? 'Search Results' : activeTab}</h2>
        <ProductGrid category={activeTab} searchTerm={searchTerm} />
      </main>
      <Footer />
    </div>
  );
};

export default App;
